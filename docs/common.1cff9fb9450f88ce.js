"use strict";(self.webpackChunkangular_conduit=self.webpackChunkangular_conduit||[]).push([[592],{5371:(O,D,r)=>{r.d(D,{J:()=>p});var a=r(9862),g=r(7398),e=r(2029);let p=(()=>{class t{constructor(n){this.http=n}query(n){let l=new a.LE;return Object.keys(n.filters).forEach(u=>{l=l.set(u,n.filters[u])}),this.http.get("/articles"+("feed"===n.type?"/feed":""),{params:l})}get(n){return this.http.get(`/articles/${n}`).pipe((0,g.U)(l=>l.article))}delete(n){return this.http.delete(`/articles/${n}`)}create(n){return this.http.post("/articles/",{article:n}).pipe((0,g.U)(l=>l.article))}update(n){return this.http.put(`/articles/${n.slug}`,{article:n}).pipe((0,g.U)(l=>l.article))}favorite(n){return this.http.post(`/articles/${n}/favorite`,{}).pipe((0,g.U)(l=>l.article))}unfavorite(n){return this.http.delete(`/articles/${n}/favorite`)}static#t=this.\u0275fac=function(l){return new(l||t)(e.LFG(a.eN))};static#e=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},3292:(O,D,r)=>{r.d(D,{P:()=>M});var a=r(8357),g=r(3638),e=r(3699),p=r(6814),t=r(2029);function E(i,A){if(1&i&&(t.TgZ(0,"li",6),t._uU(1),t.qZA()),2&i){const s=A.$implicit;t.xp6(1),t.hij(" ",s," ")}}const n=function(i){return["/article",i]};let l=(()=>{class i{toggleFavorite(s){this.article.favorited=s,s?this.article.favoritesCount++:this.article.favoritesCount--}static#t=this.\u0275fac=function(c){return new(c||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-article-preview"]],inputs:{article:"article"},standalone:!0,features:[t.jDz],decls:13,vars:9,consts:[[1,"article-preview"],[3,"article"],[1,"pull-xs-right",3,"article","toggle"],[1,"preview-link",3,"routerLink"],[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"]],template:function(c,o){1&c&&(t.TgZ(0,"div",0)(1,"app-article-meta",1)(2,"app-favorite-button",2),t.NdJ("toggle",function(P){return o.toggleFavorite(P)}),t._uU(3),t.qZA()(),t.TgZ(4,"a",3)(5,"h1"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Read more..."),t.qZA(),t.TgZ(11,"ul",4),t.YNc(12,E,2,1,"li",5),t.qZA()()()),2&c&&(t.xp6(1),t.Q6J("article",o.article),t.xp6(1),t.Q6J("article",o.article),t.xp6(1),t.hij(" ",o.article.favoritesCount," "),t.xp6(1),t.Q6J("routerLink",t.VKq(7,n,o.article.slug)),t.xp6(2),t.Oqu(o.article.title),t.xp6(2),t.Oqu(o.article.description),t.xp6(4),t.Q6J("ngForOf",o.article.tagList))},dependencies:[a.h,g.t,e.rH,p.sg],encapsulation:2})}return i})();var u=function(i){return i.NOT_LOADED="NOT_LOADED",i.LOADING="LOADING",i.LOADED="LOADED",i}(u||{}),m=r(8645),_=r(9773),C=r(5371);function v(i,A){1&i&&t._UZ(0,"app-article-preview",3),2&i&&t.Q6J("article",A.$implicit)}function L(i,A){1&i&&(t.TgZ(0,"div",4),t._uU(1," Loading articles...\n"),t.qZA())}function h(i,A){1&i&&(t.TgZ(0,"div",4),t._uU(1," No articles are here... yet.\n"),t.qZA())}const f=function(i){return{active:i}};function d(i,A){if(1&i){const s=t.EpF();t.TgZ(0,"li",7)(1,"button",8),t.NdJ("click",function(){const y=t.CHM(s).$implicit,P=t.oxw(2);return t.KtG(P.setPageTo(y))}),t._uU(2),t.qZA()()}if(2&i){const s=A.$implicit,c=t.oxw(2);t.Q6J("ngClass",t.VKq(2,f,s===c.currentPage)),t.xp6(2),t.hij(" ",s," ")}}function T(i,A){if(1&i&&(t.TgZ(0,"nav")(1,"ul",5),t.YNc(2,d,3,4,"li",6),t.qZA()()),2&i){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.totalPages)}}let M=(()=>{class i{set config(s){s&&(this.query=s,this.currentPage=1,this.runQuery())}constructor(s){this.articlesService=s,this.results=[],this.currentPage=1,this.totalPages=[],this.loading=u.NOT_LOADED,this.LoadingState=u,this.destroy$=new m.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setPageTo(s){this.currentPage=s,this.runQuery()}runQuery(){this.loading=u.LOADING,this.results=[],this.limit&&(this.query.filters.limit=this.limit,this.query.filters.offset=this.limit*(this.currentPage-1)),this.articlesService.query(this.query).pipe((0,_.R)(this.destroy$)).subscribe(s=>{this.loading=u.LOADED,this.results=s.articles,this.totalPages=Array.from(new Array(Math.ceil(s.articlesCount/this.limit)),(c,o)=>o+1)})}static#t=this.\u0275fac=function(c){return new(c||i)(t.Y36(C.J))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-article-list"]],inputs:{limit:"limit",config:"config"},standalone:!0,features:[t.jDz],decls:4,vars:4,consts:[[3,"article",4,"ngFor","ngForOf"],["class","article-preview",4,"ngIf"],[4,"ngIf"],[3,"article"],[1,"article-preview"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"]],template:function(c,o){1&c&&(t.YNc(0,v,1,1,"app-article-preview",0),t.YNc(1,L,2,0,"div",1),t.YNc(2,h,2,0,"div",1),t.YNc(3,T,3,1,"nav",2)),2&c&&(t.Q6J("ngForOf",o.results),t.xp6(1),t.Q6J("ngIf",o.loading===o.LoadingState.LOADING),t.xp6(1),t.Q6J("ngIf",o.loading===o.LoadingState.LOADED&&!o.results.length),t.xp6(1),t.Q6J("ngIf",o.loading===o.LoadingState.LOADED&&o.totalPages.length>1))},dependencies:[l,p.sg,p.mk,p.O5],styles:[".page-link[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}return i})()},8357:(O,D,r)=>{r.d(D,{h:()=>E});var a=r(3699),g=r(6814),e=r(2029);const p=function(n){return["/profile",n]},t=["*"];let E=(()=>{class n{static#t=this.\u0275fac=function(m){return new(m||n)};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-article-meta"]],inputs:{article:"article"},standalone:!0,features:[e.jDz],ngContentSelectors:t,decls:10,vars:12,consts:[[1,"article-meta"],[3,"routerLink"],[3,"src"],[1,"info"],[1,"author",3,"routerLink"],[1,"date"]],template:function(m,_){1&m&&(e.F$t(),e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"a",4),e._uU(5),e.qZA(),e.TgZ(6,"span",5),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.Hsn(9),e.qZA()),2&m&&(e.xp6(1),e.Q6J("routerLink",e.VKq(8,p,_.article.author.username)),e.xp6(1),e.Q6J("src",_.article.author.image,e.LSH),e.xp6(2),e.Q6J("routerLink",e.VKq(10,p,_.article.author.username)),e.xp6(1),e.hij(" ",_.article.author.username," "),e.xp6(2),e.hij(" ",e.xi3(8,5,_.article.createdAt,"longDate")," "))},dependencies:[a.rH,g.uU],encapsulation:2,changeDetection:0})}return n})()},3638:(O,D,r)=>{r.d(D,{t:()=>C});var a=r(2029),g=r(8645),e=r(4664),p=r(6232),t=r(9773),E=r(6814),n=r(5371),l=r(3699),u=r(3934);const m=function(v,L,h){return{disabled:v,"btn-outline-primary":L,"btn-primary":h}},_=["*"];let C=(()=>{class v{constructor(h,f,d){this.articleService=h,this.router=f,this.userService=d,this.destroy$=new g.x,this.isSubmitting=!1,this.toggle=new a.vpe}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}toggleFavorite(){this.isSubmitting=!0,this.userService.isCustomerLoggedIn.pipe((0,e.w)(h=>h?this.article.favorited?this.articleService.unfavorite(this.article.slug):this.articleService.favorite(this.article.slug):(this.router.navigate(["/login"]),p.E)),(0,t.R)(this.destroy$)).subscribe({next:()=>{this.isSubmitting=!1,this.toggle.emit(!this.article.favorited)},error:()=>this.isSubmitting=!1})}static#t=this.\u0275fac=function(f){return new(f||v)(a.Y36(n.J),a.Y36(l.F0),a.Y36(u.v))};static#e=this.\u0275cmp=a.Xpm({type:v,selectors:[["app-favorite-button"]],inputs:{article:"article"},outputs:{toggle:"toggle"},standalone:!0,features:[a.jDz],ngContentSelectors:_,decls:3,vars:5,consts:[[1,"btn","btn-sm",3,"ngClass","click"],[1,"ion-heart"]],template:function(f,d){1&f&&(a.F$t(),a.TgZ(0,"button",0),a.NdJ("click",function(){return d.toggleFavorite()}),a._UZ(1,"i",1),a.Hsn(2),a.qZA()),2&f&&a.Q6J("ngClass",a.kEZ(1,m,d.isSubmitting,!d.article.favorited,d.article.favorited))},dependencies:[E.mk],encapsulation:2})}return v})()}}]);